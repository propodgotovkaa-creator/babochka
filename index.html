<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1.0">
<title>Genially — Редактор «Найди персонажа»</title>

<style>
:root{
  --bg:#0b1020;
  --panel:rgba(20,24,40,.82);
  --line:rgba(255,255,255,.14);
  --txt:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.65);
  --accent:#2d6cdf;
  --ok:#16a34a;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:system-ui;background:var(--bg);color:var(--txt)}
.wrap{display:grid;grid-template-columns:360px 1fr;height:100%}

.panel{
  background:var(--panel);
  border-right:1px solid var(--line);
  padding:14px;
  overflow:auto;
}

.panel h1{font-size:16px;margin:0 0 10px}
label{font-size:12px;color:var(--muted)}
input,select,textarea{
  width:100%;
  padding:8px;
  margin-top:6px;
  border-radius:8px;
  border:1px solid var(--line);
  background:rgba(255,255,255,.06);
  color:var(--txt);
}

.row{margin-bottom:12px}
button{
  border:0;
  border-radius:8px;
  padding:8px 12px;
  font-weight:600;
  cursor:pointer;
}
.primary{background:var(--accent);color:#fff}
.secondary{background:var(--ok);color:#fff}

.stage{
  position:relative;
  background:
    repeating-linear-gradient(
      45deg,
      rgba(255,255,255,.04),
      rgba(255,255,255,.04) 10px,
      rgba(255,255,255,.02) 10px,
      rgba(255,255,255,.02) 20px
    );
  overflow:hidden;
}

.hud{
  position:absolute;
  top:10px;left:10px;right:10px;
  display:flex;justify-content:space-between;
  pointer-events:none;
  z-index:10;
}

.badge{
  background:rgba(0,0,0,.45);
  padding:6px 10px;
  border-radius:999px;
  font-size:12px;
}

.target{
  position:absolute;
  cursor:pointer;
}
.target img{
  width:100%;
  height:100%;
  object-fit:contain;
}

@keyframes pop{
  from{opacity:0;transform:scale(.7)}
  to{opacity:1;transform:scale(1)}
}
.fx-pop{animation:pop .55s ease}
</style>
</head>

<body>

<div class="wrap">
  <div class="panel">
    <h1>Редактор «Найди персонажа»</h1>

    <div class="row">
      <label>URL картинки персонажа</label>
      <input id="imgUrl" type="text">
    </div>

    <div class="row">
      <label>Размер (px)</label>
      <input id="size" type="range" min="20" max="120" value="46">
    </div>

    <div class="row">
      <label>Количество находок</label>
      <input id="rounds" type="number" value="7" min="1">
    </div>

    <div class="row">
      <label>Анимация</label>
      <select id="anim">
        <option value="none">без анимации</option>
        <option value="pop" selected>pop</option>
      </select>
    </div>

    <div class="row">
      <button class="primary" id="gen">Получить код</button>
      <button class="secondary" id="copy">Копировать</button>
    </div>

    <textarea id="code" style="height:220px;font-family:monospace"></textarea>
  </div>

  <div class="stage" id="stage">
    <div class="hud">
      <div class="badge" id="task">Найди бабочку и нажми на неё!</div>
      <div class="badge" id="progress">0/7</div>
    </div>
    <div class="target fx-pop" id="target">
      <img id="img">
    </div>
  </div>
</div>

<script>
/* ✅ ДЕФОЛТНАЯ БАБОЧКА — УЖЕ ПРАВИЛЬНАЯ ССЫЛКА */
const DEFAULT_URL =
  "https://propodgotovkaa-creator.github.io/babochka/babochka.png";

const imgUrl = document.getElementById('imgUrl');
const size = document.getElementById('size');
const rounds = document.getElementById('rounds');
const anim = document.getElementById('anim');
const target = document.getElementById('target');
const img = document.getElementById('img');
const stage = document.getElementById('stage');
const progress = document.getElementById('progress');
const codeBox = document.getElementById('code');

let found = 0;

/* INIT */
imgUrl.value = DEFAULT_URL;
img.src = DEFAULT_URL;

function place(){
  const r = stage.getBoundingClientRect();
  const s = +size.value;
  target.style.width = s+'px';
  target.style.height = s+'px';
  target.style.left = Math.random()*(r.width-s)+'px';
  target.style.top  = Math.random()*(r.height-s)+'px';
}

target.onclick = ()=>{
  found++;
  progress.textContent = found+'/'+rounds.value;
  if(found>=rounds.value){
    target.style.display='none';
    return;
  }
  place();
};

imgUrl.onchange = ()=>{
  img.src = imgUrl.value;
};

size.oninput = place;

place();

/* ГЕНЕРАЦИЯ КОДА */
document.getElementById('gen').onclick = ()=>{
  codeBox.value =
`<div id="FX_ROOT">
  <img src="${imgUrl.value}" style="width:${size.value}px">
</div>`;
};

document.getElementById('copy').onclick = ()=>{
  navigator.clipboard.writeText(codeBox.value);
};
</script>

</body>
</html>
